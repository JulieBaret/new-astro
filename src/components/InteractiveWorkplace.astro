---
import { Picture } from 'astro:assets';
import background from '../assets/cosy_workplace/background.png';
import arcane_poster from '../assets/cosy_workplace/arcane_poster.png';
import fleabag_poster from '../assets/cosy_workplace/fleabag_poster.png';
import shera_poster from '../assets/cosy_workplace/shera_poster.png';
import reflect from '../assets/cosy_workplace/reflect.png';
import WobblingPlant from './WobblingPlant.astro';

const sharedClass = 'md:h-[80dvh] md:w-auto w-full h-full';

// Choose a random poster on each refresh
const posters = [arcane_poster, fleabag_poster, shera_poster];
const poster = posters[Math.floor(Math.random() * posters.length)];
---

<div class="px-4 md:py-4 py-8 w-full md:w-auto overflow-hidden">
    <div class={sharedClass} style={{ position: 'relative', overflow: 'visible' }}>
        <Picture
            class={sharedClass}
            style={{ position: 'absolute', bottom: 0, left: 0, zIndex: -1 }}
            src={poster}
            alt="Arcane poster"
        />
        <Picture
            class={sharedClass}
            style={{
                position: 'absolute',
                width: '35%',
                height: 'auto',
                top: '28%',
                right: '18%',
                zIndex: -1,
                rotate: '-10deg',
                animation: 'diagonal 3s infinite linear',
            }}
            src={reflect}
            alt="Light reflect"
        />
        <Picture
            class={sharedClass}
            style={{
                objectFit: 'cover',
                borderRadius: '230% 170% 160% 123% / 100% 100% 70% 50%',
            }}
            src={background}
            alt="Cosy workplace"
        />
        <div class="absolute bottom-[3%] -left-[2%] z-10 w-full">
            <WobblingPlant />
        </div>
    </div>
</div>

<style>
    @keyframes diagonal {
        0% {
            transform: translate(0, 0);
            opacity: 0.2;
        }

        30% {
            transform: translate(100%, -100%);
            opacity: 0.2;
        }

        80% {
            transform: translate(100%, -100%);
            opacity: 0;
        }

        100% {
            transform: translate(0, 0);
            opacity: 0;
        }
    }
</style>
